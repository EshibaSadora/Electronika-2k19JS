# Процессор StormCPU32bit
***
Процессор 32 битный, но с ограниченным количеством пинов (маленькая адресная шина и шина данных)
<br>


# Выводы:
***
8 шина данных<br>
16 адресная шина<br>
4 отладочные пины<br>
<br>
# Регистры 
***
<h3>Пользовательские регистры</h3><br>
Все пользовательские регистры объединяются друг с другом, образуя два 32 битных регистра

<br>
<br>
AL,AH 8 битные регистры<br>
BL,BH 8 битные регистры<br>
CL,CH 8 битные регистры<br>
DL,DH 8 битные регистры<br>

<br>
AX - 16 битный регистр , делится на AL,AH 8 битные регистры<br>
BX - 16 битный регистр , делится на BL,BH 8 битные регистры<br>
CX - 16 битный регистр , делится на CL,CH 8 битные регистры<br>
DX - 16 битный регистр , делится на DL,DH 8 битные регистры<br>

<br>
ABX - 32bit регистр, делится на AL,AH,BL,BH 8 битные регистры<br>
CDX - 32bit регистр, делится на CL,CH,DL,DH 8 битные регистры<br>
<br>

***
Зарезервированные регистры:<br>
PC - 16 битный регистр, программный счётчик, тут хранится адрес памяти, в который процессор обращается<br>
SP - 16 битный регистр, счётчик вершины стека<br>
RL,RH - 8 битный регистр, в котором генерируется рандомное значение (в реальных процессорах число берётся из регенерации памяти)<br>
R - 16 битное число из RH|RL<br>
F - 8 битный регистр флагов, регистр процессора, отражающий текущее состояние процессора.<br>


# Флаги
Флаги процессора хранятся в регистре F<br>
<br>
F0 - флаг 0, если в результате операции в алу на выходе получается 0, то флаг = 1<br>
F1 - флаг переполнения, если в результате операции в алу на выходе число больше чем максимальное для текущего регистра или ячейкам, то флаг = 1 (поможет при операциях переноса)<br>
F2 - флаг чётности, если в результате операции в алу на выходе получается число кратное 2, то флаг = 1 <br>
F3 - флаг сравнения ><br>
F4 - флаг сравнения <<br>
F5 - флаг сравнения =<br>
F6,F7 - флаги пользователя<br>


# команды

***
Все команды 2 битные, с дополнительным количеством регистров<br>
Процессор читает команду из PC адреса памяти (читает два раза, так как 2 байта), затем распознаёт её и читает операнды, если они есть. Далее PC становится равным адресу следующей команды.<br>
***
<h3>Список команд</h3><br>
Команды:<br>
01 MOV - перемещение<br>
02 ADD - сложение<br>
03 ADC - вычитание<br>
04 MUL - умножение<br>
05 DIV - деление<br>
06 INC - увеличить число на 1<br>
07 DEC - уменьшить число на 1<br>
08 CP - сравнение<br>
09 JMP - безусловный переход<br>
10 JMPF - условный переход<br>
11 CALL - безусловный переход с сохранение текущего адреса в стек<br>
12 CALLF - условный переход с сохранение текущего адреса в стек<br>
13 RET - возвращение из CALL<br>
14 PUT - отправить число в стек<br>
15 POP - взять число из стека<br>
16 DDR - работа с массивами данных<br>
17 BIT - работа с битами<br>
18 STOP - Остановка cpu<br>
19 RES - Перезагрузка cpu<br>
<br>

<h3>Reference, ссылки</h3>
<br>
Команды обращаются к ссылкам, ссылки это указатель на определённую точку (память,регистры)<br>
ссылки = reference(ref)<br>

типы Reference <br>
00 прямая ссылка на число следующее в памяти <br>
01 AL<br>
02 AH<br>
03 BL<br>
04 BH<br>
05 CL<br><br>
06 CH <br>
07 DL <br>
08 DH<br>
09 AX <br>
10 BX<br>
11 CX<br>
12 DX<br>
13 ABX<br>
14 CDX<br>
15 RL<br>
16 RH <br>
17 R <br>
18 F<br>
19 ссылка на ячейку памяти<br>



***
<h3>Обозначения</h3>


<h3>Команда MOV </h3>
Мнемоника : MOV [ref in][ref out]<br>
Перемещение числа: MOV,куда переместить, что переместить<br>
Важно помнить что следует соблюдать размеры чисел, а также что старое значение теряется<br>
<br>


<h3>Команда ADD</h3>
Мнемоника : ADD [ref in][ref out]<br>
Прибавить число: ADD,куда прибавить, что прибавить<br>
Важно помнить что следует соблюдать размеры чисел, а также что старое значение теряется<br>
<br>


<h3>Команда ADC</h3>
Мнемоника : ADC [ref in][ref out]<br>
Вычесть число: ADC,откуда отнять, что отнять<br>
Важно помнить что следует соблюдать размеры чисел, а также что старое значение теряется<br>
<br>

<h3>Команда MUL</h3>
Мнемоника : MUL [ref in][ref out]<br>
Умножить число: MUL,что умножить, что умножить<br>
Важно помнить что следует соблюдать размеры чисел, а также что старое значение теряется<br>
<br>

<h3>Команда DIV</h3>
Мнемоника : DIV [ref in][ref out]<br>
Умножить число: DIV,делимое, делитель<br>
<br>
в 8 битных операциях AH - частное, AL - остаток<br>
в 16 битных операциях AX - частное, BX - остаток<br>
в 32 битных AX - частное, BX - остаток при том старые значения исчезают<br>
<br>

<h3>Команда INC</h3>
Мнемоника : INC [ref inout]<br>
Увеличить число на 1: INC,что увеличить<br>
<br>

<h3>Команда DEC</h3>
Мнемоника : DEC [ref inout]<br>
Уменьшить число на 1: DEC,что уменьшить<br>
<br>

<h3>Команда CP</h3>
Мнемоника : CP  [ref in][ref in]<br>
Команда сравнения: CP,что сравнить, с чем сравнить<br>
F5 - если числа равны<br>
F3 - если число ><br>
F4 - если число <<br>
<br>

<h3>Команда JMP</h3>
Мнемоника : JMP [ref in]<br>
Команда безусловного перехода, устанавливает флаг PC в значение :JMP,значение<br>
Проще говоря процессор в следующей команде переходит в адрес указанный в значении
<br>

<h3>Команда JMPF</h3>
Мнемоника : JMPF [ref in][ref in]<br>
Команда условного перехода, если флаг на который ссылается пользователь включен то совершается переход : JMP,значение<br>
ref1 - куда прыгать<br>
ref2 - номер флага<br>
Проще говоря процессор в следующей команде переходит в адрес указанный в значении<br>
<br>

<h3>Команда CALL</h3>
Мнемоника : CALL [ref in]<br>
Безусловный вызов функции : СALL, адрес<br>
PC переносится в стек, и после команды RET возвращается обратно<br>
Процессор выполняет подпрограмму и возвращается обратно<br>
Проще говоря процессор в следующей команде переходит в адрес указанный в значении<br>
<br>

<h3>Команда CALLF</h3><br>
Мнемоника : CALLF [ref in][ref in]<br>
Условный вызов функции : CALLF, адрес<br>
Если флаг на который ссылается пользователь включен то совершается переход<br>
PC переносится в стек, и после команды RET возвращается обратно<br>
Процессор выполняет подпрограмму и возвращается обратно<br>
Проще говоря процессор в следующей команде переходит в адрес указанный в значении<br>
<br>

<h3>Команда RET</h3>
Мнемоника : RET []<br>
Возвращение из функции, берёт число из стека и помещает его в PC<br>
<br>

<h3>Команда PUT</h3>
Мнемоника : PUT [ref in]
Кладёт число в стек<br>
<br>

<h3>Команда POP</h3>
Мнемоника :  POP [ref in]
Берёт число из стека<br>
<br>

<h3>Команда DDR</h3>
Мнемоника : DDR [ref in][ref in][ref in]
Перемещает массив байт заданного размера из адреса 1 в адрес 2<br>
DDR, адрес 2, адрес 1, размер<br>
<br>

<h3>Команда BIT</h3>
Мнемоника : BIT [ref in][ref in][ref in]<br>
Команда работы с битами<br>
устанавливает значение в регистр заданный в команде по номеру<br>
BIT регистр,номер,значение<br>
<br>

<h3>Команда STOP</h3>
Мнемоника : BIT []<br>
Остановка cpu<br>
<br>

<h3>Команда RES</h3>
Мнемоника : RES []<br>
Перезагрузка cpu<br>
<br>
